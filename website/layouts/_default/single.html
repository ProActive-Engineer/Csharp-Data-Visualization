{{ define "main" }}

{{ if not .Title }}
{{ warnf "Missing Title: %q" .File.Path }}
{{ end }}

{{ if not .Description }}
{{ warnf "Missing Description: %q" .File.Path }}
{{ end }}

{{ if not .Date }}
{{ warnf "Missing Date: %q" .File.Path }}
{{ end }}


<article class="bg-white shadow-sm px-4 py-1 border border-top-0 rounded-bottom rounded-top-0">

    <header>

        <div class="fs-1 fw-light mb-0">
            <a href="{{ .Permalink }}" class="text-dark">
                {{ .Title | markdownify }}
            </a>
        </div>

        <div class="fs-5 fw-lighter">
            {{ .Description | markdownify }}
        </div>

        <div style="opacity: .4;">
            <a href="{{ .Permalink }}" class="text-dark">
                {{ if not .Date.IsZero }}
                {{ .Date.Format "January 2, 2006" }}
                {{ end }}

                {{ if isset .Params "lastmod" }}
                {{ if ne .Date .Lastmod }}
                (updated on {{ .Params.lastmod | dateFormat "Jan 2, 2006" }})
                {{ end }}
                {{ end }}
            </a>
        </div>

    </header>

    <hr class="my-4" />

    {{ .Content | replaceRE "(<h[1-9] id=\"([^\"]+)\".+)(</h[1-9]+>)"
        `<a href="#${2}">${1}</a> ${3}` | safeHTML }}
</article>

<nav class="p-2 lh-lg fs-4 my-4 fw-light">

    {{ if .Prev }}
    <div class="">
        Next: <a href="{{ .Prev.Permalink }}">{{ .Prev.Title }}</a>
    </div>
    {{ end }}

    {{ if .Next }}
    <div class="">
        Previous: <a href="{{ .Next.Permalink }}">{{ .Next.Title }}</a>
    </div>
    {{ end }}

    <div class="">
        {{ with .Site.GetPage "section" .Section }}
        Section: <a href='{{ .Permalink }}'>{{ .Title }}</a>
        {{ end }}
    </div>

</nav>

{{ end }}