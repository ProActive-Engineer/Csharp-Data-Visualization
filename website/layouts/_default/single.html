{{ define "main" }}

{{ if not .Title }}
{{ warnf "Missing Title: %q" .File.Path }}
{{ end }}

{{ if not .Description }}
{{ warnf "Missing Description: %q" .File.Path }}
{{ end }}

{{ if not .Date }}
{{ warnf "Missing Date: %q" .File.Path }}
{{ end }}

<header class="my-3">

    <div class="fs-1 fw-light mb-0">
        <a href="{{ .Permalink }}" class="text-dark">
            {{ .Title | markdownify }}
        </a>
    </div>

    <div class="fs-5 fw-lighter">
        {{ .Description | markdownify }}
    </div>

    <div style="opacity: .4;">

        {{ if not .Date.IsZero }}
        <a href="{{ .Permalink }}" class="text-dark">
            {{ .Date.Format "January 2, 2006" }}
        </a>
        {{ end }}

        <span style='opacity: .3;'>|</span>

        {{ if isset .Params "lastmod" }}
        {{ if ne .Date .Lastmod }}

        <a href="{{ .Permalink }}" class="text-dark">updated on {{ .Params.lastmod | dateFormat "Jan 2, 2006" }}</a>
        {{ end }}
        {{ end }}

        <span style='opacity: .3;'>|</span>

        <a href="https://github.com/swharden/Csharp-Data-Visualization/blob/main/website/content/{{ path.Clean .File.Path }}"
            class="text-dark">view source</a>
    </div>

</header>

<article class="bg-white shadow-sm p-4 border rounded0">
    {{ .Content | replaceRE "(<h[1-9] id=\"([^\"]+)\".+)(</h[1-9]+>)"
        `<a href="#${2}">${1}</a> ${3}` | safeHTML }}
</article>

<div class="p-2" style="opacity: .3;">
    <a href="https://github.com/swharden/Csharp-Data-Visualization/blob/main/website/content/{{ path.Clean .File.Path }}"
        class="text-dark">
        view source
    </a>
</div>

<nav class="p-2 lh-lg fs-4 my-4 fw-light">

    {{ if .Prev }}
    <div class="">
        Next: <a href="{{ .Prev.Permalink }}">{{ .Prev.Title }}</a>
    </div>
    {{ end }}

    {{ if .Next }}
    <div class="">
        Previous: <a href="{{ .Next.Permalink }}">{{ .Next.Title }}</a>
    </div>
    {{ end }}

    <div class="">
        {{ with .Site.GetPage "section" .Section }}
        Section: <a href='{{ .Permalink }}'>{{ .Title }}</a>
        {{ end }}
    </div>

</nav>

{{ end }}